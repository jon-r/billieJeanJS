{"version":3,"sources":["webpack:///bundle.js","webpack:///webpack/bootstrap c98bd6021b90a3f24a1a","webpack:///./cache.js","webpack:///./config.js","webpack:///./utils.js","webpack:///./points.js","webpack:///./grid.js","webpack:///./index.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","cacheAdd","key","cache","cacheGet","default","selector","gridLines","rectSize","spawnSpeed","runSpeed","limit","setAttrs","el","attrs","keys","forEach","setAttribute","isFactor","isFactorFilter","this","getRandom","range","Math","floor","random","randomFrom","arr","length","addArr","arr1","arr2","map","Number","_interopRequireDefault","obj","setDirection","currData","dataset","currDirection","direction","currSpecial","special","currRoutes","JSON","parse","routes","possibleRoutes","x","directionFrom","_utils","nextPoint","currEl","newDirection","currCoords","coords","split","offset","directionTo","newCoords","join","newEl","_cache","activatePoint","nextEl","classList","add","setTimeout","remove","_config2","pointsActive","max","activatePoints","pointsStarts","pointsAll","filter","point","pointsStartCount","setInterval","rng","_config","_grid","_grid2","Array","from","u","r","pointIs","routeCount","line","start","setGridRoutes","y","grid","isHoriz","isVert","out","push","gridCountY","gridCountX","stringify","setSpecial","rect","getRect","presetRect","cloneNode","data-routes","data-coords","buildGrid","gridX","fill","gridY","points","_","__","some","container","appendChild","doc","document","querySelector","containerSize","getBBox","ceil","width","height","createElementNS","class","_points"],"mappings":"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","file":"bundle.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/dist\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 5);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.cacheAdd = cacheAdd;\nexports.cacheGet = cacheGet;\n\nvar cache = {};\n\nfunction cacheAdd(key, value) {\n  cache[key] = value;\n}\n\nfunction cacheGet(key) {\n  return cache[key];\n}\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n// options\nexports.default = {\n  selector: '[data-gridme]',\n  gridLines: 10,\n  rectSize: 4, // including 1px pad\n  spawnSpeed: 500, // time per dot spawn\n  runSpeed: 80, // time per dot activate the next dot\n  limit: 10 };\n\n// export default opts;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setAttrs = setAttrs;\nexports.isFactor = isFactor;\nexports.isFactorFilter = isFactorFilter;\nexports.getRandom = getRandom;\nexports.randomFrom = randomFrom;\nexports.addArr = addArr;\nfunction setAttrs(el, attrs) {\n  Object.keys(attrs).forEach(function (key) {\n    return el.setAttribute(key, attrs[key]);\n  });\n  return el;\n}\n\nfunction isFactor(i, n) {\n  return i % n === 0 && i > 0;\n}\n\nfunction isFactorFilter(i) {\n  return isFactor(i, this);\n}\n\nfunction getRandom(range) {\n  return Math.floor(Math.random() * range);\n}\n\nfunction randomFrom(arr) {\n  var rng = getRandom(arr.length);\n\n  return arr[rng];\n}\n\nfunction addArr(arr1, arr2) {\n  return arr1.map(function (n, i) {\n    return Number(n) + Number(arr2[i]);\n  });\n}\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = activatePoints;\n\nvar _config = __webpack_require__(1);\n\nvar _config2 = _interopRequireDefault(_config);\n\nvar _utils = __webpack_require__(2);\n\nvar _grid = __webpack_require__(4);\n\nvar _grid2 = _interopRequireDefault(_grid);\n\nvar _cache = __webpack_require__(0);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar pointsAll = Array.from((0, _grid2.default)());\nvar pointsActive = 0;\n\nvar directionTo = {\n  u: [0, -1],\n  d: [0, 1],\n  l: [-1, 0],\n  r: [1, 0]\n};\n\nvar directionFrom = {\n  u: 'd',\n  d: 'u',\n  l: 'r',\n  r: 'l'\n};\n\nfunction setDirection(el) {\n  var currData = el.dataset;\n  var currDirection = currData.direction;\n  currData.direction = '';\n\n  var currSpecial = currData.special;\n  if (currSpecial === 'line') return currDirection;\n\n  var currRoutes = JSON.parse(currData.routes);\n  if (currSpecial === 'start' && currDirection) return false;\n\n  var possibleRoutes = currRoutes\n  // .filter(x => x !== directionFrom[currDirection]);\n  .map(function (x) {\n    return x === directionFrom[currDirection] ? currDirection : x;\n  });\n\n  return (0, _utils.randomFrom)(possibleRoutes);\n}\n\nfunction nextPoint(currEl) {\n  var newDirection = setDirection(currEl);\n  if (!newDirection) {\n    return false;\n  }\n\n  var currCoords = currEl.dataset.coords.split(',');\n  var offset = directionTo[newDirection];\n  var newCoords = (0, _utils.addArr)(currCoords, offset).join(',');\n  var newEl = (0, _cache.cacheGet)(newCoords);\n\n  newEl.dataset.direction = newDirection;\n\n  return newEl;\n}\n\nfunction activatePoint(el) {\n  var nextEl = nextPoint(el);\n  if (!nextEl) {\n    pointsActive = Math.max(pointsActive - 1, 0);\n    return false;\n  }\n\n  el.classList.add('glow');\n\n  setTimeout(function () {\n    activatePoint(nextEl);\n    el.classList.remove('glow');\n  }, _config2.default.runSpeed);\n\n  return true;\n}\n\nfunction activatePoints() {\n  var pointsStarts = pointsAll.filter(function (point) {\n    return point.dataset.special === 'start';\n  });\n  var pointsStartCount = pointsStarts.length;\n\n  return setInterval(function () {\n    // return setTimeout(() => {\n    if (pointsActive < _config2.default.limit) {\n      var rng = (0, _utils.getRandom)(pointsStartCount);\n\n      if (pointsStarts) activatePoint(pointsStarts[rng], false);\n      pointsActive += 1;\n    }\n  }, _config2.default.spawnSpeed);\n}\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = buildGrid;\n\nvar _utils = __webpack_require__(2);\n\nvar _cache = __webpack_require__(0);\n\nvar _config = __webpack_require__(1);\n\nvar _config2 = _interopRequireDefault(_config);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar doc = document;\nvar container = doc.querySelector(_config2.default.selector);\nvar containerSize = container.getBBox();\nvar gridCountX = Math.ceil(containerSize.width / _config2.default.rectSize);\nvar gridCountY = Math.ceil(containerSize.height / _config2.default.rectSize);\n\nvar presetRect = (0, _utils.setAttrs)(doc.createElementNS('http://www.w3.org/2000/svg', 'rect'), {\n  height: _config2.default.rectSize - 1,\n  width: _config2.default.rectSize - 1,\n  class: 'grid-rect'\n});\n\nfunction pointIs(filter, el) {\n  var routes = JSON.parse(el.dataset.routes);\n  var routeCount = routes.length;\n\n  var out = {\n    direction: routes[0],\n    line: routeCount === 2,\n    start: routeCount === 1\n  };\n\n  return out[filter];\n}\n\nfunction setGridRoutes(coords) {\n  var x = coords[0];\n  var y = coords[1];\n  var grid = _config2.default.gridLines;\n\n  var isHoriz = (0, _utils.isFactor)(y, grid);\n  var isVert = (0, _utils.isFactor)(x, grid);\n\n  var out = [];\n\n  if (isVert && y > 0) out.push('u');\n  if (isVert && y < gridCountY - 1) out.push('d');\n  if (isHoriz && x > 0) out.push('l');\n  if (isHoriz && x < gridCountX - 1) out.push('r');\n\n  // TODO: add 'specials' (eg linear, start to filter in advance);\n\n  return JSON.stringify(out);\n}\n\nfunction setSpecial(rect) {\n  if (pointIs('line', rect)) {\n    return 'line';\n  }\n  if (pointIs('start', rect)) {\n    return 'start';\n  }\n  return false;\n}\n\nfunction getRect(arr) {\n  return (0, _utils.setAttrs)(presetRect.cloneNode(), {\n    x: arr[0] * _config2.default.rectSize,\n    y: arr[1] * _config2.default.rectSize,\n    'data-routes': setGridRoutes(arr),\n    'data-coords': arr.join(',')\n  });\n}\n\nfunction buildGrid() {\n  var gridX = new Array(gridCountX).fill();\n  var gridY = new Array(gridCountY).fill();\n\n  var points = [];\n\n  gridX.forEach(function (_, x) {\n    gridY.forEach(function (__, y) {\n      var coords = [x, y];\n\n      if (coords.some(_utils.isFactorFilter, _config2.default.gridLines)) {\n        var rect = getRect(coords);\n        rect.dataset.special = setSpecial(rect);\n        (0, _cache.cacheAdd)(coords.join(','), rect);\n        container.appendChild(rect);\n        points.push(rect);\n      }\n    });\n  });\n\n  return points;\n}\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _points = __webpack_require__(3);\n\nvar _points2 = _interopRequireDefault(_points);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n(0, _points2.default)();\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// bundle.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c98bd6021b90a3f24a1a","\r\nconst cache = {};\r\n\r\nexport function cacheAdd(key, value) {\r\n  cache[key] = value;\r\n}\r\n\r\nexport function cacheGet(key) {\r\n  return cache[key];\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./cache.js","// options\r\nexport default {\r\n  selector: '[data-gridme]',\r\n  gridLines: 10,\r\n  rectSize: 4, // including 1px pad\r\n  spawnSpeed: 500, // time per dot spawn\r\n  runSpeed: 80, // time per dot activate the next dot\r\n  limit: 10, // number of active lines\r\n};\r\n\r\n// export default opts;\r\n\n\n\n// WEBPACK FOOTER //\n// ./config.js","\r\nexport function setAttrs(el, attrs) {\r\n  Object.keys(attrs).forEach(key => el.setAttribute(key, attrs[key]));\r\n  return el;\r\n}\r\n\r\nexport function isFactor(i, n) {\r\n  return i % n === 0 && i > 0;\r\n}\r\n\r\nexport function isFactorFilter(i) {\r\n  return isFactor(i, this);\r\n}\r\n\r\nexport function getRandom(range) {\r\n  return Math.floor(Math.random() * range);\r\n}\r\n\r\nexport function randomFrom(arr) {\r\n  const rng = getRandom(arr.length);\r\n\r\n  return arr[rng];\r\n}\r\n\r\nexport function addArr(arr1, arr2) {\r\n  return arr1.map((n, i) => Number(n) + Number(arr2[i]));\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./utils.js","import opts from './config';\r\nimport { getRandom, randomFrom, addArr } from './utils';\r\nimport buildGrid from './grid';\r\nimport { cacheGet } from './cache';\r\n\r\nconst pointsAll = Array.from(buildGrid());\r\nlet pointsActive = 0;\r\n\r\nconst directionTo = {\r\n  u: [0, -1],\r\n  d: [0, 1],\r\n  l: [-1, 0],\r\n  r: [1, 0],\r\n};\r\n\r\nconst directionFrom = {\r\n  u: 'd',\r\n  d: 'u',\r\n  l: 'r',\r\n  r: 'l',\r\n};\r\n\r\nfunction setDirection(el) {\r\n  const currData = el.dataset;\r\n  const currDirection = currData.direction;\r\n  currData.direction = '';\r\n\r\n  const currSpecial = currData.special;\r\n  if (currSpecial === 'line') return currDirection;\r\n\r\n  const currRoutes = JSON.parse(currData.routes);\r\n  if (currSpecial === 'start' && currDirection) return false;\r\n\r\n  const possibleRoutes = currRoutes\r\n  // .filter(x => x !== directionFrom[currDirection]);\r\n  .map(x => x === directionFrom[currDirection] ? currDirection : x);\r\n\r\n  return randomFrom(possibleRoutes);\r\n}\r\n\r\n\r\nfunction nextPoint(currEl) {\r\n  const newDirection = setDirection(currEl);\r\n  if (!newDirection) {\r\n    return false;\r\n  }\r\n\r\n  const currCoords = currEl.dataset.coords.split(',');\r\n  const offset = directionTo[newDirection];\r\n  const newCoords = addArr(currCoords, offset).join(',');\r\n  const newEl = cacheGet(newCoords);\r\n\r\n  newEl.dataset.direction = newDirection;\r\n\r\n  return newEl;\r\n}\r\n\r\nfunction activatePoint(el) {\r\n  const nextEl = nextPoint(el);\r\n  if (!nextEl) {\r\n    pointsActive = Math.max(pointsActive - 1, 0);\r\n    return false;\r\n  }\r\n\r\n  el.classList.add('glow');\r\n\r\n  setTimeout(() => {\r\n    activatePoint(nextEl);\r\n    el.classList.remove('glow');\r\n  }, opts.runSpeed);\r\n\r\n  return true;\r\n}\r\n\r\nexport default function activatePoints() {\r\n  const pointsStarts = pointsAll.filter(point => point.dataset.special === 'start');\r\n  const pointsStartCount = pointsStarts.length;\r\n\r\n\r\n  return setInterval(() => {\r\n  // return setTimeout(() => {\r\n    if (pointsActive < opts.limit) {\r\n      const rng = getRandom(pointsStartCount);\r\n\r\n      if (pointsStarts) activatePoint(pointsStarts[rng], false);\r\n      pointsActive += 1;\r\n    }\r\n  }, opts.spawnSpeed);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./points.js","import { setAttrs, isFactor, isFactorFilter } from './utils';\r\nimport { cacheAdd } from './cache';\r\nimport opts from './config';\r\n\r\nconst doc = document;\r\nconst container = doc.querySelector(opts.selector);\r\nconst containerSize = container.getBBox();\r\nconst gridCountX = Math.ceil(containerSize.width / opts.rectSize);\r\nconst gridCountY = Math.ceil(containerSize.height / opts.rectSize);\r\n\r\nconst presetRect = setAttrs(doc.createElementNS('http://www.w3.org/2000/svg', 'rect'), {\r\n  height: opts.rectSize - 1,\r\n  width: opts.rectSize - 1,\r\n  class: 'grid-rect',\r\n});\r\n\r\nfunction pointIs(filter, el) {\r\n  const routes = JSON.parse(el.dataset.routes);\r\n  const routeCount = routes.length;\r\n\r\n  const out = {\r\n    direction: routes[0],\r\n    line: routeCount === 2,\r\n    start: routeCount === 1,\r\n  };\r\n\r\n  return out[filter];\r\n}\r\n\r\nfunction setGridRoutes(coords) {\r\n  const x = coords[0];\r\n  const y = coords[1];\r\n  const grid = opts.gridLines;\r\n\r\n  const isHoriz = isFactor(y, grid);\r\n  const isVert = isFactor(x, grid);\r\n\r\n  const out = [];\r\n\r\n  if (isVert && y > 0) out.push('u');\r\n  if (isVert && y < gridCountY - 1) out.push('d');\r\n  if (isHoriz && x > 0) out.push('l');\r\n  if (isHoriz && x < gridCountX - 1) out.push('r');\r\n\r\n  // TODO: add 'specials' (eg linear, start to filter in advance);\r\n\r\n  return JSON.stringify(out);\r\n}\r\n\r\nfunction setSpecial(rect) {\r\n  if (pointIs('line', rect)) {\r\n    return 'line';\r\n  }\r\n  if (pointIs('start', rect)) {\r\n    return 'start';\r\n  }\r\n  return false;\r\n}\r\n\r\nfunction getRect(arr) {\r\n  return setAttrs(presetRect.cloneNode(), {\r\n    x: arr[0] * opts.rectSize,\r\n    y: arr[1] * opts.rectSize,\r\n    'data-routes': setGridRoutes(arr),\r\n    'data-coords': arr.join(','),\r\n  });\r\n}\r\n\r\nexport default function buildGrid() {\r\n  const gridX = new Array(gridCountX).fill();\r\n  const gridY = new Array(gridCountY).fill();\r\n\r\n  const points = [];\r\n\r\n  gridX.forEach((_, x) => {\r\n    gridY.forEach((__, y) => {\r\n      const coords = [x, y];\r\n\r\n      if (coords.some(isFactorFilter, opts.gridLines)) {\r\n        const rect = getRect(coords);\r\n        rect.dataset.special = setSpecial(rect);\r\n        cacheAdd(coords.join(','), rect);\r\n        container.appendChild(rect);\r\n        points.push(rect);\r\n      }\r\n    });\r\n  });\r\n\r\n  return points;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./grid.js","import activatePoints from './points';\r\n\r\nactivatePoints();\r\n\n\n\n// WEBPACK FOOTER //\n// ./index.js"],"sourceRoot":""}