{"version":3,"sources":["webpack:///bundle.js","webpack:///webpack/bootstrap b6c5e317df7cacb7b54b","webpack:///./config.js","webpack:///./utils.js","webpack:///./points.js","webpack:///./grid.js","webpack:///./index.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","default","selector","gridLines","rectSize","spawnSpeed","runSpeed","setAttrs","el","attrs","keys","forEach","key","setAttribute","isFactor","isFactorFilter","this","getRandom","range","Math","floor","random","randomFrom","arr","length","addArr","arr1","arr2","map","_interopRequireDefault","obj","pointIs","filter","routes","JSON","parse","dataset","routeCount","direction","start","setDirection","currData","currDirection","currRoutes","possibleRoutes","x","directionFrom","_utils","nextPoint","currEl","newDirection","currCoords","coords","offset","directionTo","newCoords","stringify","newEl","pointsAll","find","point","activatePoint","nextEl","classList","add","setTimeout","_config2","remove","activatePoints","pointsStarts","pointsStartCount","setInterval","rng","_config","_grid","_grid2","Array","from","u","r","setGridRoutes","y","grid","isHoriz","isVert","out","push","gridCountY","gridCountX","getRect","presetRect","cloneNode","data-routes","data-coords","buildGrid","gridX","fill","gridY","points","_","__","some","rect","container","appendChild","doc","document","querySelector","containerSize","getBBox","width","height","createElementNS","class","_points"],"mappings":"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","file":"bundle.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/assets\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 4);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n// options\nexports.default = {\n  selector: '[data-gridme]',\n  gridLines: 10,\n  rectSize: 3, // including 1px pad\n  spawnSpeed: 1000, // time per dot spawn\n  runSpeed: 50 };\n\n// export default opts;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setAttrs = setAttrs;\nexports.isFactor = isFactor;\nexports.isFactorFilter = isFactorFilter;\nexports.getRandom = getRandom;\nexports.randomFrom = randomFrom;\nexports.addArr = addArr;\nfunction setAttrs(el, attrs) {\n  Object.keys(attrs).forEach(function (key) {\n    return el.setAttribute(key, attrs[key]);\n  });\n  return el;\n}\n\nfunction isFactor(i, n) {\n  return i % n === 0 && i > 0;\n}\n\nfunction isFactorFilter(i) {\n  return isFactor(i, this);\n}\n\nfunction getRandom(range) {\n  return Math.floor(Math.random() * range);\n}\n\nfunction randomFrom(arr) {\n  var rng = getRandom(arr.length);\n\n  return arr[rng];\n}\n\nfunction addArr(arr1, arr2) {\n  return arr1.map(function (n, i) {\n    return n + arr2[i];\n  });\n}\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = activatePoints;\n\nvar _config = __webpack_require__(0);\n\nvar _config2 = _interopRequireDefault(_config);\n\nvar _utils = __webpack_require__(1);\n\nvar _grid = __webpack_require__(3);\n\nvar _grid2 = _interopRequireDefault(_grid);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar pointsAll = Array.from((0, _grid2.default)());\n\nvar directionTo = {\n  u: [0, -1],\n  d: [0, 1],\n  l: [-1, 0],\n  r: [1, 0]\n};\n\nvar directionFrom = {\n  u: 'd',\n  d: 'u',\n  l: 'r',\n  r: 'l'\n};\n\nfunction pointIs(filter, el) {\n  var routes = JSON.parse(el.dataset.routes);\n  var routeCount = routes.length;\n\n  var out = {\n    direction: routes[0],\n    start: routeCount === 1\n  };\n\n  return out[filter];\n}\n\nfunction setDirection(el) {\n  var currData = el.dataset;\n  var currDirection = currData.direction ? currData.direction : false;\n  var currRoutes = JSON.parse(currData.routes);\n  var possibleRoutes = currRoutes.filter(function (x) {\n    return x !== directionFrom[currDirection];\n  });\n\n  // console.log(possibleRoutes);\n\n  currData.direction = '';\n\n  return (0, _utils.randomFrom)(possibleRoutes);\n}\n\nfunction nextPoint(currEl) {\n  var newDirection = setDirection(currEl);\n  if (!newDirection) {\n    return false;\n  }\n\n  var currCoords = JSON.parse(currEl.dataset.coords);\n  var offset = directionTo[newDirection];\n  var newCoords = JSON.stringify((0, _utils.addArr)(currCoords, offset));\n  var newEl = pointsAll.find(function (point) {\n    return point.dataset.coords === newCoords;\n  });\n\n  newEl.dataset.direction = newDirection;\n\n  return newEl;\n}\n\nfunction activatePoint(el) {\n  var nextEl = nextPoint(el);\n  if (!nextEl) {\n    return false;\n  }\n\n  el.classList.add('glow');\n\n  setTimeout(function () {\n    return activatePoint(nextEl);\n  }, _config2.default.runSpeed);\n  setTimeout(function () {\n    return el.classList.remove('glow');\n  }, _config2.default.spawnSpeed);\n\n  return true;\n}\n\nfunction activatePoints() {\n  var pointsStarts = pointsAll.filter(function (point) {\n    return pointIs('start', point);\n  });\n  var pointsStartCount = pointsStarts.length;\n\n  return setInterval(function () {\n    // return setTimeout(() => {\n    var rng = (0, _utils.getRandom)(pointsStartCount);\n\n    if (pointsStarts) activatePoint(pointsStarts[rng], false);\n  }, _config2.default.spawnSpeed);\n}\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = buildGrid;\n\nvar _utils = __webpack_require__(1);\n\nvar _config = __webpack_require__(0);\n\nvar _config2 = _interopRequireDefault(_config);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar doc = document;\nvar container = doc.querySelector(_config2.default.selector);\nvar containerSize = container.getBBox();\nvar gridCountX = containerSize.width / _config2.default.rectSize;\nvar gridCountY = containerSize.height / _config2.default.rectSize;\n\nvar presetRect = (0, _utils.setAttrs)(doc.createElementNS('http://www.w3.org/2000/svg', 'rect'), {\n  height: _config2.default.rectSize - 1,\n  width: _config2.default.rectSize - 1,\n  class: 'grid-rect'\n});\n\nfunction setGridRoutes(coords) {\n  var x = coords[0];\n  var y = coords[1];\n  var grid = _config2.default.gridLines;\n\n  var isHoriz = (0, _utils.isFactor)(y, grid);\n  var isVert = (0, _utils.isFactor)(x, grid);\n\n  var out = [];\n\n  if (isVert && y > 0) out.push('u');\n  if (isVert && y < gridCountY - 1) out.push('d');\n  if (isHoriz && x > 0) out.push('l');\n  if (isHoriz && x < gridCountX - 1) out.push('r');\n\n  return JSON.stringify(out);\n}\n\nfunction getRect(arr) {\n  return (0, _utils.setAttrs)(presetRect.cloneNode(), {\n    x: arr[0] * _config2.default.rectSize,\n    y: arr[1] * _config2.default.rectSize,\n    'data-routes': setGridRoutes(arr),\n    'data-coords': JSON.stringify(arr)\n  });\n}\n\nfunction buildGrid() {\n  var gridX = new Array(gridCountX).fill();\n  var gridY = new Array(gridCountY).fill();\n\n  var points = [];\n\n  gridX.forEach(function (_, x) {\n    gridY.forEach(function (__, y) {\n      var coords = [x, y];\n\n      if (coords.some(_utils.isFactorFilter, _config2.default.gridLines)) {\n        var rect = getRect(coords);\n        container.appendChild(rect);\n        points.push(rect);\n      }\n    });\n  });\n\n  return points;\n}\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _points = __webpack_require__(2);\n\nvar _points2 = _interopRequireDefault(_points);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n(0, _points2.default)();\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// bundle.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/assets\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b6c5e317df7cacb7b54b","// options\r\nexport default {\r\n  selector: '[data-gridme]',\r\n  gridLines: 10,\r\n  rectSize: 3, // including 1px pad\r\n  spawnSpeed: 1000, // time per dot spawn\r\n  runSpeed: 50, //time per dot activate the next dot\r\n};\r\n\r\n// export default opts;\r\n\n\n\n// WEBPACK FOOTER //\n// ./config.js","\r\nexport function setAttrs(el, attrs) {\r\n  Object.keys(attrs).forEach(key => el.setAttribute(key, attrs[key]));\r\n  return el;\r\n}\r\n\r\nexport function isFactor(i, n) {\r\n  return i % n === 0 && i > 0;\r\n}\r\n\r\nexport function isFactorFilter(i) {\r\n  return isFactor(i, this);\r\n}\r\n\r\nexport function getRandom(range) {\r\n  return Math.floor(Math.random() * range);\r\n}\r\n\r\nexport function randomFrom(arr) {\r\n  const rng = getRandom(arr.length);\r\n\r\n  return arr[rng];\r\n}\r\n\r\nexport function addArr(arr1, arr2) {\r\n  return arr1.map((n, i) => n + arr2[i]);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./utils.js","import opts from './config';\r\nimport { getRandom, randomFrom, addArr } from './utils';\r\nimport buildGrid from './grid';\r\n\r\nconst pointsAll = Array.from(buildGrid());\r\n\r\nconst directionTo = {\r\n  u: [0, -1],\r\n  d: [0, 1],\r\n  l: [-1, 0],\r\n  r: [1, 0],\r\n};\r\n\r\nconst directionFrom = {\r\n  u: 'd',\r\n  d: 'u',\r\n  l: 'r',\r\n  r: 'l',\r\n};\r\n\r\nfunction pointIs(filter, el) {\r\n  const routes = JSON.parse(el.dataset.routes);\r\n  const routeCount = routes.length;\r\n\r\n  const out = {\r\n    direction: routes[0],\r\n    start: routeCount === 1,\r\n  };\r\n\r\n  return out[filter];\r\n}\r\n\r\nfunction setDirection(el) {\r\n  const currData = el.dataset;\r\n  const currDirection = currData.direction ? currData.direction : false;\r\n  const currRoutes = JSON.parse(currData.routes);\r\n  const possibleRoutes = currRoutes\r\n  .filter(x => x !== directionFrom[currDirection]);\r\n\r\n  // console.log(possibleRoutes);\r\n\r\n  currData.direction = '';\r\n\r\n  return randomFrom(possibleRoutes);\r\n}\r\n\r\n\r\nfunction nextPoint(currEl) {\r\n  const newDirection = setDirection(currEl);\r\n  if (!newDirection) {\r\n    return false;\r\n  }\r\n\r\n  const currCoords = JSON.parse(currEl.dataset.coords);\r\n  const offset = directionTo[newDirection];\r\n  const newCoords = JSON.stringify(addArr(currCoords, offset));\r\n  const newEl = pointsAll.find(point => point.dataset.coords === newCoords);\r\n\r\n  newEl.dataset.direction = newDirection;\r\n\r\n  return newEl;\r\n}\r\n\r\nfunction activatePoint(el) {\r\n  const nextEl = nextPoint(el);\r\n  if (!nextEl) {\r\n    return false;\r\n  }\r\n\r\n  el.classList.add('glow');\r\n\r\n  setTimeout(() => activatePoint(nextEl), opts.runSpeed);\r\n  setTimeout(() => el.classList.remove('glow'), opts.spawnSpeed);\r\n\r\n  return true;\r\n}\r\n\r\nexport default function activatePoints() {\r\n  const pointsStarts = pointsAll.filter(point => pointIs('start', point));\r\n  const pointsStartCount = pointsStarts.length;\r\n\r\n  return setInterval(() => {\r\n  // return setTimeout(() => {\r\n    const rng = getRandom(pointsStartCount);\r\n\r\n    if (pointsStarts) activatePoint(pointsStarts[rng], false);\r\n  }, opts.spawnSpeed);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./points.js","import { setAttrs, isFactor, isFactorFilter } from './utils';\r\nimport opts from './config';\r\n\r\nconst doc = document;\r\nconst container = doc.querySelector(opts.selector);\r\nconst containerSize = container.getBBox();\r\nconst gridCountX = containerSize.width / opts.rectSize;\r\nconst gridCountY = containerSize.height / opts.rectSize;\r\n\r\nconst presetRect = setAttrs(doc.createElementNS('http://www.w3.org/2000/svg', 'rect'), {\r\n  height: opts.rectSize - 1,\r\n  width: opts.rectSize - 1,\r\n  class: 'grid-rect',\r\n});\r\n\r\nfunction setGridRoutes(coords) {\r\n  const x = coords[0];\r\n  const y = coords[1];\r\n  const grid = opts.gridLines;\r\n\r\n  const isHoriz = isFactor(y, grid);\r\n  const isVert = isFactor(x, grid);\r\n\r\n  const out = [];\r\n\r\n  if (isVert && y > 0) out.push('u');\r\n  if (isVert && y < gridCountY - 1) out.push('d');\r\n  if (isHoriz && x > 0) out.push('l');\r\n  if (isHoriz && x < gridCountX - 1) out.push('r');\r\n\r\n  return JSON.stringify(out);\r\n}\r\n\r\nfunction getRect(arr) {\r\n  return setAttrs(presetRect.cloneNode(), {\r\n    x: arr[0] * opts.rectSize,\r\n    y: arr[1] * opts.rectSize,\r\n    'data-routes': setGridRoutes(arr),\r\n    'data-coords': JSON.stringify(arr),\r\n  });\r\n}\r\n\r\nexport default function buildGrid() {\r\n  const gridX = new Array(gridCountX).fill();\r\n  const gridY = new Array(gridCountY).fill();\r\n\r\n  const points = [];\r\n\r\n  gridX.forEach((_, x) => {\r\n    gridY.forEach((__, y) => {\r\n      const coords = [x, y];\r\n\r\n      if (coords.some(isFactorFilter, opts.gridLines)) {\r\n        const rect = getRect(coords);\r\n        container.appendChild(rect);\r\n        points.push(rect);\r\n      }\r\n    });\r\n  });\r\n\r\n  return points;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./grid.js","import activatePoints from './points';\r\n\r\nactivatePoints();\r\n\n\n\n// WEBPACK FOOTER //\n// ./index.js"],"sourceRoot":""}